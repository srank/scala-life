Things to do:

* Unit testing - pick a framework, make it work and write some tests
* Various code smells (see FIXMEs)
* UI